"use strict";(self.webpackChunkcompose_destinations_docs=self.webpackChunkcompose_destinations_docs||[]).push([[627],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>b});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),m=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=m(e.components);return o.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=m(n),d=a,b=p["".concat(l,".").concat(d)]||p[d]||u[d]||i;return n?o.createElement(b,r(r({ref:t},c),{},{components:n})):o.createElement(b,r({ref:t},c))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:a,r[1]=s;for(var m=2;m<i;m++)r[m]=n[m];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6256:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>m});var o=n(3117),a=(n(7294),n(3905));const i={sidebar_position:1},r="Bottom bar navigation",s={unversionedId:"common-use-cases/bottom-bar-navigation",id:"version-1.x/common-use-cases/bottom-bar-navigation",title:"Bottom bar navigation",description:"One of the common cases for Android development is to have a bottom bar to navigate between the main entry point destinations of an application.",source:"@site/versioned_docs/version-1.x/common-use-cases/bottom-bar-navigation.md",sourceDirName:"common-use-cases",slug:"/common-use-cases/bottom-bar-navigation",permalink:"/common-use-cases/bottom-bar-navigation",draft:!1,editUrl:"https://github.com/raamcosta/compose-destinations-docs/edit/main/docusaurus/versioned_docs/version-1.x/common-use-cases/bottom-bar-navigation.md",tags:[],version:"1.x",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Code generation configs",permalink:"/codegenconfigs"},next:{title:"Providing ViewModels to your Screens",permalink:"/common-use-cases/providing-viewmodels"}},l={},m=[],c={toc:m},p="wrapper";function u(e){let{components:t,...n}=e;return(0,a.kt)(p,(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"bottom-bar-navigation"},"Bottom bar navigation"),(0,a.kt)("p",null,"One of the common cases for Android development is to have a bottom bar to navigate between the main entry point destinations of an application."),(0,a.kt)("p",null,"With Compose Destinations, achieving it is not too different than with normal Jetpack Compose Navigation, you just have some new tools to make it easier."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Firstly, you need some kind of closed set of Destinations that will be a part of that Bottom Navigation bar."),(0,a.kt)("br",{parentName:"p"}),"\n","For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"enum class BottomBarDestination(\n    val direction: DirectionDestinationSpec,\n    val icon: ImageVector,\n    @StringRes val label: Int\n) {\n    Greeting(GreetingScreenDestination, Icons.Default.Home, R.string.greeting_screen),\n    Feed(FeedScreenDestination, Icons.Default.Email, R.string.feed_screen),\n}\n")),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"You can also use a sealed class, sealed interface, whatever you like. The reasons I personally like enum in this case are: "),(0,a.kt)("ol",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ol"},"Enums have a ",(0,a.kt)("inlineCode",{parentName:"li"},"values()")," function which comes in handy to populate the bottom bar Composable (as we'll see next)."),(0,a.kt)("li",{parentName:"ol"},"All entries of this closed set probably have the exact same properties/functions so there is really no benefit in using sealed class over it."))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Secondly, create your bottom bar Composable."),(0,a.kt)("br",{parentName:"p"}),"\n","Taking the example from above, that could look something like:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"@Composable\nfun BottomBar(\n    navController: NavController\n) {\n    val currentDestination: Destination? = navController.appCurrentDestinationAsState().value\n        ?: NavGraphs.root.startAppDestination\n\n    BottomNavigation {\n        BottomBarDestination.values().forEach { destination ->\n            BottomNavigationItem(\n                selected = currentDestination == destination.direction,\n                onClick = {\n                    navController.navigateTo(destination.direction) {\n                        launchSingleTop = true\n                    }\n                },\n                icon = { Icon(destination.icon, contentDescription = stringResource(destination.label))},\n                label = { Text(stringResource(destination.label)) },\n            )\n        }\n    }\n}\n")),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"The above ",(0,a.kt)("inlineCode",{parentName:"p"},"appCurrentDestinationAsState()"),' is just a handy generated extension function when in "singlemodule" mode (read about configurations ',(0,a.kt)("a",{parentName:"p",href:"../codegenconfigs"},"here"),") that returns a Compose State of the current ",(0,a.kt)("inlineCode",{parentName:"p"},"Destination")," equivalent to ",(0,a.kt)("inlineCode",{parentName:"p"},"NavController.currentDestinationAsState()")," of the core library except that it returns the sealed version of ",(0,a.kt)("inlineCode",{parentName:"p"},"DestinationSpec"),".",(0,a.kt)("br",{parentName:"p"}),"\n","Same for ",(0,a.kt)("inlineCode",{parentName:"p"},"startAppDestination"),' (generated in "singlemodule" mode) vs ',(0,a.kt)("inlineCode",{parentName:"p"},"startDestination")," (core library)."),(0,a.kt)("p",{parentName:"admonition"},"Given the nature of Compose State, it initally is null so we just consider our start destination when that is the case.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Finally, use the Composable on your Scaffold's ",(0,a.kt)("inlineCode",{parentName:"strong"},"bottomBar")," slot")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"val navController = rememberNavController()\n\nScaffold(\n    bottomBar = { \n        BottomBar(navController)\n    }\n    //...\n) {\n    DestinationsNavHost(\n        navController = navController //!! this is important\n        // ...\n    )\n}\n")),(0,a.kt)("p",null,"Some considerations:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"You could make it so your ",(0,a.kt)("inlineCode",{parentName:"li"},"BottomBar")," Composable only receives the current destination and a lambda to be used when an item gets clicked. This makes your bottom bar more testable and separated from navigation code."),(0,a.kt)("li",{parentName:"ol"},"If each of your bottom bar items corresponds to different navigation graphs, your ",(0,a.kt)("inlineCode",{parentName:"li"},"BottomBarDestination")," enum could contain ",(0,a.kt)("inlineCode",{parentName:"li"},"NavGraphSpec"),"s instead of ",(0,a.kt)("inlineCode",{parentName:"li"},"DirectionDestinationSpec"),"."),(0,a.kt)("li",{parentName:"ol"},'The actual code to navigate can use save and restore states to implement this in a "multi nav back stack" way (read more in ',(0,a.kt)("a",{parentName:"li",href:"https://medium.com/androiddevelopers/multiple-back-stacks-b714d974f134"},"official article")," or see an example of it in the ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/raamcosta/compose-destinations/blob/main/sample/src/main/java/com/ramcosta/destinations/sample/ui/composables/BottomBar.kt"},"sample app"),").  "),(0,a.kt)("li",{parentName:"ol"},"Keep in mind that if at any time you need to fallback to using Jetpack Compose Navigation APIs, you can always just get the route by ",(0,a.kt)("inlineCode",{parentName:"li"},"DestinationSpec.route"),". So all approaches you might find out there, can always be implemented with Compose Destinations as well.")))}u.isMDXComponent=!0}}]);